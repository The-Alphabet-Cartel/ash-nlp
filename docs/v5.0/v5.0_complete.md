# Ash-NLP v5.0 Complete

**FILE VERSION**: v1.0  
**CREATED**: 2026-01-02  
**STATUS**: âœ… PRODUCTION READY  
**Repository**: https://github.com/the-alphabet-cartel/ash-nlp  
**Community**: The Alphabet Cartel - https://discord.gg/alphabetcartel | https://alphabetcartel.org

---

## ğŸ‰ Ash-NLP v5.0 - COMPLETE

**Completion Date**: 2026-01-02

Ash-NLP v5.0 represents a complete rewrite of the crisis detection backend, implementing a sophisticated multi-model ensemble architecture with weighted decision engine for accurate crisis classification in Discord community communications.

---

## Version Overview

| Attribute | Value |
|-----------|-------|
| Version | v5.0 |
| Phases Completed | 6 |
| Total Tests | 450+ |
| Skipped Tests | 0 |
| Architecture | Multi-Model Ensemble |
| Primary Model | BART Zero-Shot Classification |

---

## Phase Summary

| Phase | Focus | Status |
|-------|-------|--------|
| Phase 1 | Core Infrastructure | âœ… Complete |
| Phase 2 | Model Integration | âœ… Complete |
| Phase 3 | Configuration Management | âœ… Complete |
| Phase 4 | Ensemble Coordination | âœ… Complete |
| Phase 5 | Context Analysis | âœ… Complete |
| Phase 6 | Future Enhancements | âœ… Complete |

---

## Core Architecture

### Multi-Model Ensemble
```
Message â†’ BART (0.50) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â†’ Sentiment (0.25) â”€â”€â”€â”€â”€â”€â”€â”€â”¼â†’ Weighted Decision Engine â†’ Crisis Assessment
        â†’ Irony (0.15) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â†’ Emotions (0.10) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Model Weights
| Model | Weight | Purpose |
|-------|--------|---------|
| BART Zero-Shot | 0.50 | Primary semantic crisis detection |
| Cardiff Sentiment | 0.25 | Emotional tone analysis |
| Cardiff Irony | 0.15 | Sarcasm/irony detection |
| RoBERTa Emotions | 0.10 | Fine-grained emotion classification |

---

## Key Features

### Crisis Detection
- âœ… Multi-model ensemble with weighted consensus
- âœ… Five severity levels: critical, high, medium, low, safe
- âœ… Confidence scoring with explainability
- âœ… Conflict detection and resolution

### Context Analysis
- âœ… Message history trajectory analysis
- âœ… Escalation pattern detection
- âœ… Temporal risk factors (late night, weekends)
- âœ… User timezone support
- âœ… Per-severity escalation thresholds

### Alerting & Integration
- âœ… Discord webhook alerts with throttling
- âœ… Severity-based alert colors and emojis
- âœ… ASCII disagreement charts for conflicts
- âœ… Message length validation and truncation

### Performance & Reliability
- âœ… Model warm-up with detailed timing
- âœ… Retry logic with exponential backoff
- âœ… Timeout handling for inference
- âœ… Response caching
- âœ… Prometheus metrics (optional)

### Developer Experience
- âœ… Clean Architecture v5.1 compliant
- âœ… Factory function patterns
- âœ… Comprehensive test coverage (450+ tests)
- âœ… Structured JSON logging
- âœ… Interactive API documentation

---

## API Endpoints

| Endpoint | Method | Purpose |
|----------|--------|---------|
| `/analyze` | POST | Analyze message for crisis indicators |
| `/health` | GET | Health check with model status |
| `/status` | GET | Detailed system status |
| `/docs` | GET | Interactive API documentation |

---

## Configuration

### Environment Variables
- `NLP_ENVIRONMENT`: production, testing, development
- `NLP_LOG_LEVEL`: DEBUG, INFO, WARNING, ERROR
- `NLP_LOG_FORMAT`: json, human

### Config Files
- `src/config/default.json` - Default configuration
- `src/config/production.json` - Production overrides
- `src/config/testing.json` - Testing overrides
- `src/config/context_config.json` - Context analysis settings

---

## Deployment

### Docker
```bash
docker compose build --no-cache
docker compose up -d
```

### Port
- Default: 30880

### Health Check
```bash
curl http://localhost:30880/health
```

---

## Test Coverage

| Phase | Tests | Status |
|-------|-------|--------|
| Phase 2 | Model wrappers, BART accuracy | âœ… Pass |
| Phase 3 | Configuration management | âœ… Pass |
| Phase 4 | Ensemble coordination, consensus | âœ… Pass |
| Phase 5 | Context analysis, escalation | âœ… Pass |
| Phase 6 | Enhancements, edge cases | âœ… Pass |

**Total: 450+ tests, 0 skipped**

---

## Future Roadmap (v5.1)

- **FE-006**: Historical Pattern Learning
  - Store anonymized escalation sequences
  - Train lightweight pattern recognition
  - Improve prediction accuracy over time

---

## Documentation

| Document | Location |
|----------|----------|
| Clean Architecture Charter | `docs/clean_architecture_charter.md` |
| Phase 6 Enhancements | `docs/v5.0/Phase6/phase6_enhancements.md` |
| Phase 6 Complete | `docs/v5.0/phase6_complete.md` |
| API Documentation | `http://localhost:30880/docs` |

---

## Acknowledgments

Ash-NLP v5.0 was built to protect and support The Alphabet Cartel community - an LGBTQIA+ Discord community centered around gaming, political discourse, activism, and societal advocacy.

**Crisis detection saves lives.**

---

**Built with care for chosen family** ğŸ³ï¸â€ğŸŒˆ
