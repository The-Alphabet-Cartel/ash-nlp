# =============================================================================
# ASH-NLP CRISIS DETECTION SYSTEM - ENVIRONMENT CONFIGURATION v3.1
# FILE VERSION: v5.0
# LAST MODIFIED: 2025-12-30
# CLEAN ARCHITECTURE: Compliant
# Repository: https://github.com/the-alphabet-cartel/ash-nlp
# Community: The Alphabet Cartel
# https://discord.gg/alphabetcartel | https://alphabetcartel.org
# =============================================================================
# NLP_CATEGORY_FUNCTION_SETTING=value                                           # What does this variable do?
# =============================================================================

# =============================================================================
# GLOBAL ASH ECOSYSTEM VARIABLES
# These variables are used across the entire Ash ecosystem and must remain unchanged
# =============================================================================
# Set Timezone
TZ=America/Los_Angeles

# Python Settings
PYTHONUNBUFFERED=1
PYTHONDONTWRITEBYTECODE=1

# Global Secrets
GLOBAL_HUGGINGFACE_TOKEN=/run/secrets/huggingface                               # Docker secret for HuggingFace model access

# Global Logging Flags - System-wide logging controls
GLOBAL_LOGGING_ENABLE_CONSOLE=true                                              # Enable console output
GLOBAL_LOGGING_ENABLE_FILE=true                                                 # Enable file logging
GLOBAL_LOG_LEVEL=INFO                                                           # Global logging level (DEBUG, INFO, WARNING, ERROR)

# API Settings
GLOBAL_NLP_API_PORT=30880                                                       # Primary API port for NLP service

# Access control and CORS settings
GLOBAL_REQUEST_TIMEOUT=30                                                       # Request Timeout
GLOBAL_ENABLE_CORS=true                                                         # Enable Cross-Origin Resource Sharing
GLOBAL_CORS_ALLOWED_ORIGINS=*                                                   # Allowed CORS origins (comma-separated)
GLOBAL_CORS_ALLOWED_METHODS=GET,POST                                            # Allowed CORS methods
GLOBAL_CORS_ALLOWED_HEADERS=*                                                   # Allowed CORS headers
GLOBAL_ALLOWED_IPS=10.20.30.0/24,127.0.0.1,::1                                  # Comma-separated list of allowed IP ranges
# =============================================================================

# =============================================================================
# SECURITY CONFIGURATION
# Access control and CORS settings
# =============================================================================
NLP_SECURITY_BURST_LIMIT=150                                                    # Number of burst request allowed at one time
# =============================================================================

# =============================================================================
# ANALYSIS CONFIGURATION
# Algorithm parameters for crisis detection analysis
# Related files: config/analysis_config.json
# =============================================================================
# Semantic Analysis Parameters - Context and meaning analysis
NLP_ANALYSIS_SEMANTIC_CONTEXT_WINDOW=3                                          # Context window size (words)
NLP_ANALYSIS_SEMANTIC_SIMILARITY_THRESHOLD=0.75                                 # Semantic similarity threshold
NLP_ANALYSIS_CONTEXT_BOOST_WEIGHT=1.5                                           # Context boost weight factor
NLP_ANALYSIS_SEMANTIC_NEGATIVE_THRESHOLD=0.6                                    # Negative sentiment threshold

# Advanced Parameters - Fine-tuning and optimization
NLP_ANALYSIS_CONFIDENCE_BOOST_HIGH=0.15                                         # High confidence boost factor
NLP_ANALYSIS_CONFIDENCE_BOOST_MEDIUM=0.10                                       # Medium confidence boost factor
NLP_ANALYSIS_CONFIDENCE_BOOST_LOW=0.05                                          # Low confidence boost factor
NLP_ANALYSIS_PATTERN_CONFIDENCE_BOOST=0.05                                      # Pattern-based confidence boost
NLP_ANALYSIS_MODEL_CONFIDENCE_BOOST=0.0                                         # Model-based confidence boost
NLP_ANALYSIS_PATTERN_WEIGHT_MULTIPLIER=1.2                                      # Pattern weight multiplier

# False Positive/Negative Adjustment Factors - Error correction learning
NLP_ANALYSIS_LEARNING_FALSE_POSITIVE_FACTOR=-0.1                                # False positive adjustment factor
NLP_ANALYSIS_LEARNING_FALSE_NEGATIVE_FACTOR=0.1                                 # False negative adjustment factor
# =============================================================================

# =============================================================================
# FEATURE FLAGS CONFIGURATION
# Dynamic feature toggles for system functionality
# Related files: config/feature_flags.json
# =============================================================================
# Core System Features - Essential functionality toggles

# Core System Features - Enhanced feature controls
NLP_FEATURE_CORE_ENSEMBLE_ANALYSIS=true                                         # Enable core ensemble analysis functionality
NLP_FEATURE_CORE_PATTERN_INTEGRATION=true                                       # Enable core pattern integration
NLP_FEATURE_CORE_STAFF_REVIEW_LOGIC=true                                        # Enable core staff review logic
NLP_FEATURE_CORE_SAFETY_CONTROLS=true                                           # Enable core safety control mechanisms

# Analysis Component Features - Analysis pipeline toggles
NLP_FEATURE_PATTERN_ANALYSIS=true                                               # Enable pattern-based analysis
NLP_FEATURE_SEMANTIC_ANALYSIS=false                                             # Enable semantic context analysis
NLP_FEATURE_CONTEXT_ANALYSIS=true                                               # Enable context analysis functionality

# Experimental Features - Research and development features (use with caution)
NLP_FEATURE_ADVANCED_CONTEXT=true                                               # Advanced context understanding
NLP_FEATURE_COMMUNITY_VOCAB=true                                                # LGBTQIA+ community vocabulary
NLP_FEATURE_TEMPORAL_PATTERNS=true                                              # Time-based pattern analysis

# Debug Features - Enhanced debugging and development controls
NLP_FEATURE_DEBUG_DETAILED_LOGGING=true                                         # Enable debug-level detailed logging
NLP_FEATURE_DEBUG_PERFORMANCE_METRICS=true                                      # Enable debug performance metrics
NLP_FEATURE_DEBUG_RELOAD_ON_CHANGES=false                                       # Enable debug auto-reload functionality
NLP_FEATURE_DEBUG_FLIP_SENTIMENT_LOGIC=false                                    # Enable debug sentiment logic flip (testing)
# =============================================================================

# =============================================================================
# LOGGING CONFIGURATION
# Comprehensive logging control across all system components
# Related files: config/logging_config.json
# =============================================================================
# Detailed Logging Controls - Fine-grained logging features
NLP_LOGGING_ENABLE_DETAILED=true                                                # Enable detailed log messages
NLP_LOGGING_INCLUDE_RAW_LABELS=true                                             # Include raw model labels in logs
NLP_LOGGING_ANALYSIS_STEPS=false                                                # Log individual analysis steps (verbose)
NLP_LOGGING_PERFORMANCE_METRICS=true                                            # Log performance timing metrics
NLP_LOGGING_INCLUDE_REASONING=true                                              # Include decision reasoning in logs

# Component Logging - Specific system component log controls
NLP_LOGGING_THRESHOLD_CHANGES=true                                              # Log threshold adjustments
NLP_LOGGING_MODEL_DISAGREEMENTS=true                                            # Log when models disagree
NLP_LOGGING_STAFF_REVIEW_TRIGGERS=true                                          # Log staff review trigger events
NLP_LOGGING_PATTERN_ADJUSTMENTS=true                                            # Log crisis pattern adjustments
NLP_LOGGING_LABEL_MAPPINGS=true                                                 # Log label mapping decisions
NLP_LOGGING_ENSEMBLE_DECISIONS=true                                             # Log ensemble decision process
NLP_LOGGING_CRISIS_DETECTION=true                                               # Log crisis detection events

# Development Logging - Debug and development settings
NLP_LOGGING_DEBUG_MODE=false                                                    # Enable debug mode logging
NLP_LOGGING_TRACE_REQUESTS=false                                                # Trace HTTP requests (very verbose)
NLP_LOGGING_CONFIG_LOADING=false                                                # Log configuration loading process
NLP_LOGGING_MANAGER_INIT=true                                                   # Log manager initialization
NLP_LOGGING_ENV_VARS=false                                                      # Log environment variable values
# =============================================================================

# =============================================================================
# MODEL CONFIGURATION
# Controls the three-model ensemble for crisis detection
# Related files: config/model_config.json
# =============================================================================
# Model Names - HuggingFace model identifiers for the three-model ensemble
NLP_MODEL_1_NAME=                                                              # Primary depression detection model # MoritzLaurer/deberta-v3-base-zeroshot-v2.0
NLP_MODEL_2_NAME=                                                              # Sentiment analysis model # Lowerated/lm6-deberta-v3-topic-sentiment
NLP_MODEL_3_NAME=                                                              # Emotional distress detection model # MoritzLaurer/mDeBERTa-v3-base-mnli-xnli

# Model Types
NLP_MODEL_1_TYPE=zero-shot-classification
NLP_MODEL_2_TYPE=zero-shot-classification
NLP_MODEL_3_TYPE=zero-shot-classification

# Model Pipeline Tasks
NLP_MODEL_1_PIPELINE_TASK=zero-shot-classification
NLP_MODEL_2_PIPELINE_TASK=zero-shot-classification
NLP_MODEL_3_PIPELINE_TASK=zero-shot-classification

# Model Enablement Controls - Individual model on/off switches
NLP_MODEL_1_ENABLED=true                                               # Enable depression detection model
NLP_MODEL_2_ENABLED=true                                                # Enable sentiment analysis model
NLP_MODEL_3_ENABLED=true                                                 # Enable distress detection model

# Advanced Model Ensemble Settings - Enhanced ensemble configuration
NLP_MODEL_COORDINATION_REQUIRE_ALL_MODELS=true                                  # Require all models to be available for analysis

# Hardware Configuration - GPU and processing optimization
NLP_HARDWARE_DEVICE=auto                                                        # Device selection (auto, cpu, cuda)
NLP_HARDWARE_MAX_BATCH_SIZE=32                                                  # Maximum batch size for inference

# Advanced Hardware Configuration - Enhanced hardware settings
NLP_HARDWARE_PRECISION=float16                                                  # Precision level for models
NLP_HARDWARE_MAX_MEMORY=auto                                                    # Maximum memory per device (e.g., "10GB")
NLP_HARDWARE_OFFLOAD_FOLDER=./cache/models/offload                              # Directory for model weight offloading
# =============================================================================

# =============================================================================
# PATTERNS CONFIGURATION - CRISIS DETECTION
# Crisis pattern recognition for intervention
# Related files: config/patterns_config.json
# =============================================================================

# =============================================================================

# =============================================================================
# PERFORMANCE SETTINGS CONFIGURATION
# System optimization and resource management
# Related files: config/performance_config.json
# =============================================================================

# =============================================================================

# =============================================================================
# SERVER CONFIGURATION
# Network and service settings for the NLP API server
# Related files: config/server_config.json
# =============================================================================
NLP_SERVER_HOST=0.0.0.0                                                         # Server bind address (0.0.0.0 for all interfaces)
NLP_PERFORMANCE_WORKERS=1                                                       # Number of worker processes

# Security Configuration - Server security settings
NLP_SERVER_SECURITY_RATE_LIMIT_ENABLE=true                                      # Enable rate limiting

# Server Health
NLP_SERVER_ENABLE_HEALTH_CHECKS=true                                            # Enable server health checks
NLP_SERVER_HEALTH_CHECK_INTERVAL=60                                             # Health Check Interval (seconds)
NLP_SERVER_LOG_HEALTH=false                                                     # Log Health Check Status
# =============================================================================

# =============================================================================
# Settings that don't fit anywhere else
# related files: config/settings_config.json
# =============================================================================
NLP_SETTINGS_DEPRECATION_WARNINGS=true                                          # Enable deprecation warnings in logs
# =============================================================================

# =============================================================================
# STORAGE CONFIGURATION
# File paths and storage management across the system
# Related files: config/storage_config.json
# =============================================================================
# Storage Directories - Primary storage locations
NLP_STORAGE_DATA_DIR=./data                                                     # General data storage directory
NLP_STORAGE_MODELS_DIR=./cache/models                                           # Model cache and storage directory
NLP_STORAGE_LOGS_DIR=./logs                                                     # Log files directory
NLP_STORAGE_CACHE_DIR=./cache                                                   # General cache directory
NLP_STORAGE_BACKUP_DIR=./backups                                                # Backup files directory

# HuggingFace Cache Configuration - Model caching optimization
HF_HOME=./cache/models                                                          # HuggingFace cache directory
HF_DATASETS_CACHE=./cache/models                                                # HuggingFace datasets cache directory

# File Paths - Specific file locations for system components
NLP_LOG_FILE=ash-nlp.log                                                        # Main log file name

# Cache Settings - Cache behavior and limits
NLP_STORAGE_ENABLE_MODEL_CACHE=true                                             # Enable model caching
NLP_STORAGE_CACHE_CLEANUP_ON_STARTUP=false                                      # Clean cache on startup
NLP_STORAGE_MODEL_CACHE_SIZE_LIMIT=10GB                                         # Maximum model cache size
NLP_STORAGE_CACHE_EXPIRY_HOURS=24                                               # Cache expiration time in hours

# Backup Settings - Automated backup functionality
NLP_STORAGE_ENABLE_AUTO_BACKUP=false                                            # Enable automatic backups
NLP_STORAGE_BACKUP_INTERVAL_HOURS=24                                            # Backup frequency in hours
NLP_STORAGE_BACKUP_RETENTION_DAYS=30                                            # Backup retention period
NLP_STORAGE_COMPRESS_BACKUPS=true                                               # Compress backup files
NLP_STORAGE_BACKUP_LEARNING_DATA=true                                           # Include learning data in backups
NLP_STORAGE_BACKUP_CONFIG=true                                                  # Include configuration in backups

# Cleanup Settings - Automated maintenance policies
NLP_STORAGE_ENABLE_AUTO_CLEANUP=true                                            # Enable automatic cleanup
NLP_STORAGE_CLEANUP_TEMP_FILES=true                                             # Clean temporary files automatically
NLP_STORAGE_TEMP_FILE_MAX_AGE=24                                                # Maximum age for temp files (hours)
NLP_STORAGE_LOG_ROTATION_ENABLED=true                                           # Enable log file rotation
NLP_STORAGE_LOG_MAX_SIZE_MB=50                                                  # Maximum log file size before rotation
NLP_STORAGE_LOG_BACKUP_COUNT=5                                                  # Number of rotated log files to keep
# =============================================================================

# =============================================================================
# ZERO-SHOT LABELS CONFIGURATION
# Crisis detection label configuration
# Related files: config/zero_shot.json
# =============================================================================
NLP_ZERO_SHOT_LABEL_SET=                                                        # Label set choice
NLP_ZERO_SHOT_DEFAULT_LABEL_SET=                                                # Default label set for analysis
NLP_ZERO_SHOT_ENABLE_LABEL_SET_SWITCHING=true                                   # Allow dynamic label set switching
NLP_ZERO_SHOT_TRACK_LABEL_PERFORMANCE=true                                      # Track performance metrics by label set
NLP_ZERO_SHOT_HYPOTHESIS_TEMPLATE=This text expresses {label}                   # Hypothesis template for zero-shot
NLP_ZERO_SHOT_MULTI_LABEL=false                                                 # Use multiple labels per classification
NLP_ZERO_SHOT_CONFIDENCE_THRESHOLD=0.25                                         # Minimum confidence to consider
NLP_ZERO_SHOT_MAX_LABELS=5                                                      # Maximum labels to consider
NLP_ZERO_SHOT_NORMALIZE_SCORES=true                                             # Normalize scores
# =============================================================================
