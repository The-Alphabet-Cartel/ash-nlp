# =============================================================================
# Ash-NLP v5.0 Environment Variables Template
# =============================================================================
# FILE VERSION: v5.0-3-7.4-1
# LAST MODIFIED: 2026-01-01
# CLEAN ARCHITECTURE: v5.1 Compliant
# Repository: https://github.com/the-alphabet-cartel/ash-nlp
# Community: The Alphabet Cartel - https://discord.gg/alphabetcartel | https://alphabetcartel.org
#
# USAGE:
#   1. Copy this file to .env
#   2. Modify values as needed
#   3. Environment variables OVERRIDE JSON config defaults
#
# ⚠️  SECRETS WARNING:
#   Do NOT put API tokens or passwords in this file!
#   Use Docker Secrets instead: ./secrets/
#   See secrets/README.md for setup instructions
#
# =============================================================================

# -----------------------------------------------------------------------------
# API SERVER CONFIGURATION
# -----------------------------------------------------------------------------
# Host address for the API server (0.0.0.0 for all interfaces)
NLP_API_HOST=0.0.0.0

# Port for the API server (default: 30880)
NLP_API_PORT=30880

# Number of worker processes (default: 4)
NLP_API_WORKERS=1

# Request timeout in seconds (default: 30)
NLP_API_TIMEOUT=30

# Enable/disable rate limiting (default: true)
NLP_API_RATE_LIMIT_ENABLED=true

# Rate limit: requests per minute per client (default: 60)
NLP_API_RATE_LIMIT_RPM=60

# -----------------------------------------------------------------------------
# MODEL CONFIGURATION
# -----------------------------------------------------------------------------
# Device for model inference: cuda, cpu, auto (default: auto)
NLP_MODEL_DEVICE=auto

# Model cache directory (default: /app/models)
NLP_MODEL_CACHE_DIR=/app/models

# Enable model warmup on startup (default: true)
NLP_MODEL_WARMUP_ENABLED=true

# Maximum concurrent model inferences (default: 4)
NLP_MODEL_MAX_CONCURRENT=4

# -----------------------------------------------------------------------------
# BART CRISIS CLASSIFIER (Primary Model)
# -----------------------------------------------------------------------------
# HuggingFace model ID for BART
NLP_MODEL_BART_ID=facebook/bart-large-mnli

# Weight in ensemble scoring (default: 0.50)
NLP_MODEL_BART_WEIGHT=0.50

# Enable/disable this model (default: true)
NLP_MODEL_BART_ENABLED=true

# -----------------------------------------------------------------------------
# CARDIFF SENTIMENT ANALYZER (Secondary Model)
# -----------------------------------------------------------------------------
# HuggingFace model ID for sentiment
NLP_MODEL_SENTIMENT_ID=cardiffnlp/twitter-roberta-base-sentiment-latest

# Weight in ensemble scoring (default: 0.25)
NLP_MODEL_SENTIMENT_WEIGHT=0.25

# Enable/disable this model (default: true)
NLP_MODEL_SENTIMENT_ENABLED=true

# -----------------------------------------------------------------------------
# CARDIFF IRONY DETECTOR (Tertiary Model)
# -----------------------------------------------------------------------------
# HuggingFace model ID for irony detection
NLP_MODEL_IRONY_ID=cardiffnlp/twitter-roberta-base-irony

# Weight in ensemble scoring (default: 0.15)
NLP_MODEL_IRONY_WEIGHT=0.15

# Enable/disable this model (default: true)
NLP_MODEL_IRONY_ENABLED=true

# -----------------------------------------------------------------------------
# ROBERTA EMOTIONS CLASSIFIER (Supplementary Model)
# -----------------------------------------------------------------------------
# HuggingFace model ID for emotions
NLP_MODEL_EMOTIONS_ID=SamLowe/roberta-base-go_emotions

# Weight in ensemble scoring (default: 0.10)
NLP_MODEL_EMOTIONS_WEIGHT=0.10

# Enable/disable this model (default: true)
NLP_MODEL_EMOTIONS_ENABLED=true

# -----------------------------------------------------------------------------
# CRISIS SEVERITY THRESHOLDS
# -----------------------------------------------------------------------------
# Threshold for CRITICAL severity (default: 0.85)
NLP_THRESHOLD_CRITICAL=0.85

# Threshold for HIGH severity (default: 0.70)
NLP_THRESHOLD_HIGH=0.70

# Threshold for MEDIUM severity (default: 0.50)
NLP_THRESHOLD_MEDIUM=0.50

# Threshold for LOW severity (default: 0.30)
NLP_THRESHOLD_LOW=0.30

# -----------------------------------------------------------------------------
# LOGGING CONFIGURATION
# -----------------------------------------------------------------------------
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL (default: INFO)
NLP_LOG_LEVEL=INFO

# Log format: json, human (default: human for dev, json for production)
NLP_LOG_FORMAT=human

# Log output file path (default: /app/logs/ash-nlp.log)
NLP_LOG_FILE=/app/logs/ash-nlp.log

# Enable console logging (default: true)
NLP_LOG_CONSOLE=true

# -----------------------------------------------------------------------------
# ALERTING CONFIGURATION
# -----------------------------------------------------------------------------
# Enable Discord alerting (default: true)
NLP_ALERTING_ENABLED=true

# Note: Discord webhook URL should be in secrets/discord_alert_webhook
# See secrets/README.md for setup instructions

# -----------------------------------------------------------------------------
# PERFORMANCE CONFIGURATION
# -----------------------------------------------------------------------------
# Enable response caching (default: true)
NLP_CACHE_ENABLED=true

# Cache TTL in seconds (default: 300 = 5 minutes)
NLP_CACHE_TTL=300

# Maximum cache entries (default: 1000)
NLP_CACHE_MAX_SIZE=1000

# Enable async parallel inference (default: true)
NLP_ASYNC_INFERENCE=true

# -----------------------------------------------------------------------------
# HUGGINGFACE CONFIGURATION
# -----------------------------------------------------------------------------
# HuggingFace cache directory
HF_HOME=/app/models

# Offline mode (use cached models only)
TRANSFORMERS_OFFLINE=0

# -----------------------------------------------------------------------------
# CONSENSUS CONFIGURATION (Phase 4)
# -----------------------------------------------------------------------------
# Default consensus algorithm: weighted_voting, majority_voting, unanimous, conflict_aware
NLP_CONSENSUS_ALGORITHM=weighted_voting

# Crisis threshold for consensus algorithms (default: 0.5)
NLP_CONSENSUS_CRISIS_THRESHOLD=0.5

# Majority voting: fraction of votes needed for crisis (default: 0.5)
NLP_CONSENSUS_MAJORITY_THRESHOLD=0.5

# Unanimous: threshold for crisis agreement (default: 0.6)
NLP_CONSENSUS_UNANIMOUS_THRESHOLD=0.6

# Conflict-aware: variance threshold for disagreement detection (default: 0.15)
NLP_CONSENSUS_DISAGREEMENT_THRESHOLD=0.15

# -----------------------------------------------------------------------------
# CONFLICT DETECTION CONFIGURATION (Phase 4)
# -----------------------------------------------------------------------------
# Enable conflict detection (default: true)
NLP_CONFLICT_DETECTION_ENABLED=true

# Score disagreement threshold (max-min > threshold = conflict) (default: 0.4)
NLP_CONFLICT_SCORE_THRESHOLD=0.4

# -----------------------------------------------------------------------------
# CONFLICT RESOLUTION CONFIGURATION (Phase 4)
# -----------------------------------------------------------------------------
# Default resolution strategy: conservative, optimistic, mean, review_flag
NLP_CONFLICT_RESOLUTION_STRATEGY=conservative

# -----------------------------------------------------------------------------
# CONFLICT ALERTING CONFIGURATION (Phase 4)
# -----------------------------------------------------------------------------
# Enable Discord alerts for model conflicts (default: true)
NLP_CONFLICT_ALERT_ENABLED=true

# Alert on high severity conflicts (default: true)
NLP_CONFLICT_ALERT_HIGH_SEVERITY=true

# Alert when review flag is set (default: true)
NLP_CONFLICT_ALERT_REVIEW_FLAG=true

# Cooldown between alerts in seconds (default: 60)
NLP_CONFLICT_ALERT_COOLDOWN=60

# -----------------------------------------------------------------------------
# EXPLAINABILITY CONFIGURATION (Phase 4)
# -----------------------------------------------------------------------------
# Enable explanation generation (default: true)
NLP_EXPLAINABILITY_ENABLED=true

# Verbosity level: minimal, standard, detailed (default: standard)
NLP_EXPLAINABILITY_VERBOSITY=standard

# Include individual model details in explanation (default: true)
NLP_EXPLAINABILITY_MODEL_DETAILS=true

# Include recommended actions (default: true)
NLP_EXPLAINABILITY_RECOMMENDATIONS=true

# =============================================================================
# ⚠️  REMINDER: Secrets go in ./secrets/ NOT here!
# =============================================================================
# WRONG: HF_TOKEN=hf_xxxxx
# RIGHT: echo "hf_xxxxx" > secrets/huggingface
# =============================================================================
# END OF CONFIGURATION
# =============================================================================
