# ======================================================= #
# Ash-NLP v5.0 Environment Variables Template
# ======================================================= #
# FILE VERSION: v5.0-6-1.0-1
# LAST MODIFIED: 2026-01-17
# CLEAN ARCHITECTURE: v5.2 Compliant
# Repository: https://github.com/the-alphabet-cartel/ash-nlp
# Community: The Alphabet Cartel - https://discord.gg/alphabetcartel | https://alphabetcartel.org
#
# USAGE:
#   1. Copy this file to .env
#   2. Modify values as needed
#   3. Environment variables OVERRIDE JSON config defaults
#
# ⚠️  SECRETS WARNING:
#   Do NOT put API tokens or passwords in this file!
#   Use Docker Secrets instead: ./secrets/
#   See secrets/README.md for setup instructions
#
# ------------------------------------------------------- #
# VARIABLE_NAME=value                                     # Description (default: X)
# Comments regarding use of previous variable
# More comments
# ------------------------------------------------------- #
# ======================================================= #


# ======================================================= #
# GLOBAL VARIABLES
# ======================================================= #
# ------------------------------------------------------- #
# USER/GROUP ID (LinuxServer.io Style)
# ------------------------------------------------------- #
# Set these to match your host user for correct file permissions.
# Find your IDs by running 'id' on your host system.
#
# Example output: uid=1000(bubba) gid=1000(bubba) ...
#   PUID=1000
#   PGID=1000
# ------------------------------------------------------- #
PUID=1001                                                 # User ID to run container as (default: 1000)
PGID=1001                                                 # Group ID to run container as (default: 1000)
# ------------------------------------------------------- #
# ------------------------------------------------------- #
# TIMEZONE - Used by Docker and the bot
# ------------------------------------------------------- #
TZ=America/Los_Angeles                                    # Server timezone (default: UTC)
# ------------------------------------------------------- #
# ======================================================= #


# ======================================================= #
# NLP SERVER SETUP
# ======================================================= #
# ------------------------------------------------------- #
# SERVER CONFIGURATION
# ------------------------------------------------------- #
NLP_ENVIRONMENT=production                                # production, testing (default: production)
# ------------------------------------------------------- #
# ------------------------------------------------------- #
# LOGGING CONFIGURATION
# ------------------------------------------------------- #
NLP_LOG_LEVEL=INFO                                        # Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL (default: INFO)
NLP_LOG_FORMAT=human                                      # Log format: json, human (default: human)
# Charter v5.2 colorized output; use 'json' for production log aggregators
NLP_LOG_FILE=/app/logs/ash-nlp.log                        # Log output file path (default: /app/logs/ash-nlp.log)
NLP_LOG_CONSOLE=true                                      # Enable console logging (default: true)
# ------------------------------------------------------- #
# ------------------------------------------------------- #
# API SERVER CONFIGURATION
# ------------------------------------------------------- #
NLP_API_HOST=0.0.0.0                                      # Host address for the API server (0.0.0.0 for all interfaces)
NLP_API_PORT=30880                                        # Port for the API server (default: 30880)
NLP_API_WORKERS=1                                         # Number of worker processes (default: 4)
NLP_API_TIMEOUT=30                                        # Request timeout in seconds (default: 30)
NLP_API_RATE_LIMIT_ENABLED=true                           # Enable/disable rate limiting (default: true)
NLP_API_RATE_LIMIT_RPM=60                                 # Rate limit: requests per minute per client (default: 60)
# ------------------------------------------------------- #
# ------------------------------------------------------- #
# ALERTING CONFIGURATION
# ------------------------------------------------------- #
NLP_ALERTING_ENABLED=true                                 # Enable Discord alerting (default: true)
#
# Note: Discord webhook URL should be in secrets/discord_alert_webhook
# See secrets/README.md for setup instructions
# ------------------------------------------------------- #
# ------------------------------------------------------- #
# PERFORMANCE CONFIGURATION
# ------------------------------------------------------- #
NLP_CACHE_ENABLED=true                                    # Enable response caching (default: true)
NLP_CACHE_TTL=300                                         # Cache TTL in seconds (default: 300 = 5 minutes)
NLP_CACHE_MAX_SIZE=1000                                   # Maximum cache entries (default: 1000)
NLP_ASYNC_INFERENCE=true                                  # Enable async parallel inference (default: true)
# ------------------------------------------------------- #
# ======================================================= #

# ======================================================= #
# MODEL CONFIGURATION
# ======================================================= #
# ------------------------------------------------------- #
# HUGGINGFACE CONFIGURATION
# ------------------------------------------------------- #
HF_HOME=/app/models-cache                                 # HuggingFace cache directory
TRANSFORMERS_OFFLINE=0                                    # Offline mode (use cached models only)
# ------------------------------------------------------- #
# ------------------------------------------------------- #
# MODEL CONFIGURATION
# ------------------------------------------------------- #
NLP_MODEL_DEVICE=auto                                     # Device for model inference: cuda, cpu, auto (default: auto)
NLP_MODEL_CACHE_DIR=/app/models-cache                     # Model cache directory (default: /app/models-cache)
NLP_MODEL_WARMUP_ENABLED=true                             # Enable model warmup on startup (default: true)
NLP_MODEL_MAX_CONCURRENT=4                                # Maximum concurrent model inferences (default: 4)
# ------------------------------------------------------- #
# ------------------------------------------------------- #
# BART CRISIS CLASSIFIER (Primary Model)
# ------------------------------------------------------- #
NLP_MODEL_BART_ID=facebook/bart-large-mnli                # HuggingFace model ID for BART
NLP_MODEL_BART_WEIGHT=0.50                                # Weight in ensemble scoring (default: 0.50)
NLP_MODEL_BART_ENABLED=true                               # Enable/disable this model (default: true)
# ------------------------------------------------------- #
# ------------------------------------------------------- #
# CARDIFF SENTIMENT ANALYZER (Secondary Model)
# ------------------------------------------------------- #
NLP_MODEL_SENTIMENT_ID=cardiffnlp/twitter-roberta-base-sentiment-latest  # HuggingFace model ID for sentiment
NLP_MODEL_SENTIMENT_WEIGHT=0.25                           # Weight in ensemble scoring (default: 0.25)
NLP_MODEL_SENTIMENT_ENABLED=true                          # Enable/disable this model (default: true)
# ------------------------------------------------------- #
# ------------------------------------------------------- #
# CARDIFF IRONY DETECTOR (Tertiary Model)
# ------------------------------------------------------- #
NLP_MODEL_IRONY_ID=cardiffnlp/twitter-roberta-base-irony  # HuggingFace model ID for irony detection
NLP_MODEL_IRONY_WEIGHT=0.15                               # Weight in ensemble scoring (default: 0.15)
NLP_MODEL_IRONY_ENABLED=true                              # Enable/disable this model (default: true)
# ------------------------------------------------------- #
# ------------------------------------------------------- #
# ROBERTA EMOTIONS CLASSIFIER (Supplementary Model)
# ------------------------------------------------------- #
NLP_MODEL_EMOTIONS_ID=SamLowe/roberta-base-go_emotions    # HuggingFace model ID for emotions
NLP_MODEL_EMOTIONS_WEIGHT=0.10                            # Weight in ensemble scoring (default: 0.10)
NLP_MODEL_EMOTIONS_ENABLED=true                           # Enable/disable this model (default: true)
# ------------------------------------------------------- #
# ======================================================= #

# ======================================================= #
# THRESHOLDS CONFIGURATION
# ======================================================= #
# ------------------------------------------------------- #
# CRISIS SEVERITY THRESHOLDS
# ------------------------------------------------------- #
NLP_THRESHOLD_CRITICAL=0.85                               # Threshold for CRITICAL severity (default: 0.85)
NLP_THRESHOLD_HIGH=0.70                                   # Threshold for HIGH severity (default: 0.70)
NLP_THRESHOLD_MEDIUM=0.50                                 # Threshold for MEDIUM severity (default: 0.50)
NLP_THRESHOLD_LOW=0.30                                    # Threshold for LOW severity (default: 0.30)
# ------------------------------------------------------- #
# ------------------------------------------------------- #
# CONSENSUS CONFIGURATION
# ------------------------------------------------------- #
NLP_CONSENSUS_ALGORITHM=weighted_voting                   # Default consensus algorithm: weighted_voting, majority_voting, unanimous, conflict_aware
NLP_CONSENSUS_CRISIS_THRESHOLD=0.5                        # Crisis threshold for consensus algorithms (default: 0.5)
NLP_CONSENSUS_MAJORITY_THRESHOLD=0.5                      # Majority voting: fraction of votes needed for crisis (default: 0.5)
NLP_CONSENSUS_UNANIMOUS_THRESHOLD=0.6                     # Unanimous: threshold for crisis agreement (default: 0.6)
NLP_CONSENSUS_DISAGREEMENT_THRESHOLD=0.15                 # Conflict-aware: variance threshold for disagreement detection (default: 0.15)
# ------------------------------------------------------- #
# ------------------------------------------------------- #
# CONFLICT DETECTION CONFIGURATION
# ------------------------------------------------------- #
NLP_CONFLICT_DETECTION_ENABLED=true                       # Enable conflict detection (default: true)
NLP_CONFLICT_SCORE_THRESHOLD=0.4                          # Score disagreement threshold (max-min > threshold = conflict) (default: 0.4)
# ------------------------------------------------------- #
# ------------------------------------------------------- #
# CONFLICT RESOLUTION CONFIGURATION
# ------------------------------------------------------- #
NLP_CONFLICT_RESOLUTION_STRATEGY=conservative             # Default resolution strategy: conservative, optimistic, mean, review_flag
# ------------------------------------------------------- #
# ------------------------------------------------------- #
# CONFLICT ALERTING CONFIGURATION
# ------------------------------------------------------- #
NLP_CONFLICT_ALERT_ENABLED=true                           # Enable Discord alerts for model conflicts (default: true)
NLP_CONFLICT_ALERT_HIGH_SEVERITY=true                     # Alert on high severity conflicts (default: true)
NLP_CONFLICT_ALERT_REVIEW_FLAG=true                       # Alert when review flag is set (default: true)
NLP_CONFLICT_ALERT_COOLDOWN=60                            # Cooldown between alerts in seconds (default: 60)
# ------------------------------------------------------- #
# ------------------------------------------------------- #
# EXPLAINABILITY CONFIGURATION
# ------------------------------------------------------- #
NLP_EXPLAINABILITY_ENABLED=true                           # Enable explanation generation (default: true)
NLP_EXPLAINABILITY_VERBOSITY=standard                     # Verbosity level: minimal, standard, detailed (default: standard)
NLP_EXPLAINABILITY_MODEL_DETAILS=true                     # Include individual model details in explanation (default: true)
NLP_EXPLAINABILITY_RECOMMENDATIONS=true                   # Include recommended actions (default: true)
# ------------------------------------------------------- #
# ------------------------------------------------------- #
# CONTEXT ANALYSIS CONFIGURATION
# ------------------------------------------------------- #
NLP_CONTEXT_ANALYSIS_ENABLED=true                         # Enable context analysis features (default: true)
NLP_CONTEXT_MAX_HISTORY_SIZE=20                           # Maximum messages to analyze in history (default: 20)
# ------------------------------------------------------- #
# ------------------------------------------------------- #
# ESCALATION DETECTION CONFIGURATION
# ------------------------------------------------------- #
NLP_ESCALATION_DETECTION_ENABLED=true                     # Enable escalation detection (default: true)
NLP_ESCALATION_RAPID_THRESHOLD_HOURS=4                    # Hours threshold for "rapid" escalation classification (default: 4)
NLP_ESCALATION_GRADUAL_THRESHOLD_HOURS=24                 # Hours threshold for "gradual" escalation classification (default: 24)
NLP_ESCALATION_SCORE_THRESHOLD=0.3                        # Minimum score increase to trigger escalation detection (default: 0.3)
NLP_ESCALATION_MINIMUM_MESSAGES=3                         # Minimum messages required for escalation analysis (default: 3)
NLP_ESCALATION_ALERT_ENABLED=true                         # Enable Discord alerts on escalation detection (default: true)
NLP_ESCALATION_ALERT_COOLDOWN_SECONDS=300                 # Cooldown between escalation alerts in seconds (default: 300 = 5 minutes)
# ------------------------------------------------------- #
# ------------------------------------------------------- #
# TEMPORAL DETECTION CONFIGURATION
# ------------------------------------------------------- #
NLP_TEMPORAL_DETECTION_ENABLED=true                       # Enable temporal pattern detection (default: true)
NLP_TEMPORAL_LATE_NIGHT_START=23                          # Start hour for "late night" classification (24h format, default: 23 = 11PM)
NLP_TEMPORAL_LATE_NIGHT_END=6                             # End hour for "late night" classification (24h format, default: 6 = 6AM)
NLP_TEMPORAL_LATE_NIGHT_MODIFIER=1.2                      # Risk score modifier for late night messages (default: 1.2 = 20% boost)
NLP_TEMPORAL_RAPID_POSTING_MINUTES=30                     # Minutes threshold for "rapid posting" detection (default: 30)
NLP_TEMPORAL_RAPID_POSTING_COUNT=5                        # Message count threshold for "rapid posting" detection (default: 5)
NLP_TEMPORAL_WEEKEND_MODIFIER=1.1                         # Risk score modifier for weekend messages (default: 1.1 = 10% boost)
# ------------------------------------------------------- #
# ------------------------------------------------------- #
# TREND ANALYSIS CONFIGURATION
# ------------------------------------------------------- #
NLP_TREND_ANALYSIS_ENABLED=true                           # Enable trend analysis (default: true)
NLP_TREND_WORSENING_THRESHOLD=0.15                        # Score delta threshold to classify as "worsening" trend (default: 0.15)
NLP_TREND_IMPROVING_THRESHOLD=-0.15                       # Score delta threshold to classify as "improving" trend (default: -0.15)
NLP_TREND_VELOCITY_RAPID=0.1                              # Score change per hour threshold for "rapid" velocity (default: 0.1)
NLP_TREND_VELOCITY_GRADUAL=0.03                           # Score change per hour threshold for "gradual" velocity (default: 0.03)
# ------------------------------------------------------- #
# ------------------------------------------------------- #
# INTERVENTION CONFIGURATION
# ------------------------------------------------------- #
NLP_INTERVENTION_ESCALATION_BOOST=true                    # Boost urgency level when escalation detected (default: true)
NLP_INTERVENTION_LATE_NIGHT_BOOST=true                    # Boost urgency level during late night hours (default: true)
# ------------------------------------------------------- #
# ======================================================= #


# ======================================================= #
# ⚠️  SECRETS REMINDER
# ======================================================= #
# Do NOT put secrets in this file! Use Docker Secrets:
#
# Required:
#   secrets/discord_bot_token    - Discord bot token (from Developer Portal)
#   secrets/claude_api_token     - Claude API key (from Anthropic Console)
#
# Optional:
#   secrets/discord_alert_token  - Discord webhook URL for system alerts
#   secrets/redis_token          - Redis password (if authentication enabled)
#
# Example:
#   echo "your-secret-token" > secrets/discord_bot_token
#   chmod 600 secrets/discord_bot_token
#
# See secrets/README.md for full instructions
# ======================================================= #


# ======================================================= #
# END OF CONFIGURATION
# ======================================================= #
