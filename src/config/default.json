{
	"_metadata": {
		"file_version": "v5.0-3-2.0-1",
		"last_modified": "2026-01-27",
		"clean_architecture": "Compliant",
		"description": "Ash-NLP v5.0 Default Configuration - Crisis Detection Ensemble with Vigil Integration",
		"repository": "https://github.com/the-alphabet-cartel/ash-nlp",
		"community": "The Alphabet Cartel - https://discord.gg/alphabetcartel | https://alphabetcartel.org"
	},

	"api": {
		"description": "API server configuration for FastAPI application",
		"host": "${NLP_API_HOST}",
		"port": "${NLP_API_PORT}",
		"workers": "${NLP_API_WORKERS}",
		"timeout": "${NLP_API_TIMEOUT}",
		"rate_limit_enabled": "${NLP_API_RATE_LIMIT_ENABLED}",
		"rate_limit_rpm": "${NLP_API_RATE_LIMIT_RPM}",
		"defaults": {
			"host": "0.0.0.0",
			"port": 30880,
			"workers": 4,
			"timeout": 30,
			"rate_limit_enabled": true,
			"rate_limit_rpm": 60
		},
		"validation": {
			"host": {
				"type": "string",
				"required": true
			},
			"port": {
				"type": "integer",
				"range": [1024, 65535],
				"required": true
			},
			"workers": {
				"type": "integer",
				"range": [1, 16],
				"required": true
			},
			"timeout": {
				"type": "integer",
				"range": [5, 300],
				"required": true
			},
			"rate_limit_enabled": {
				"type": "boolean",
				"required": false
			},
			"rate_limit_rpm": {
				"type": "integer",
				"range": [10, 1000],
				"required": false
			}
		}
	},

	"models": {
		"description": "Model configuration for the multi-model ensemble",
		"device": "${NLP_MODEL_DEVICE}",
		"cache_dir": "${NLP_MODEL_CACHE_DIR}",
		"warmup_enabled": "${NLP_MODEL_WARMUP_ENABLED}",
		"max_concurrent": "${NLP_MODEL_MAX_CONCURRENT}",
		"max_input_tokens": "${NLP_MODEL_MAX_INPUT_TOKENS}",
		"truncation_strategy": "${NLP_MODEL_TRUNCATION_STRATEGY}",
		"defaults": {
			"device": "auto",
			"cache_dir": "/app/cache/models",
			"warmup_enabled": true,
			"max_concurrent": 4,
			"max_input_tokens": 512,
			"truncation_strategy": "smart"
		},
		"validation": {
			"device": {
				"type": "string",
				"allowed_values": ["auto", "cuda", "cpu"],
				"required": true
			},
			"cache_dir": {
				"type": "string",
				"required": true
			},
			"warmup_enabled": {
				"type": "boolean",
				"required": false
			},
			"max_concurrent": {
				"type": "integer",
				"range": [1, 8],
				"required": false
			},
			"max_input_tokens": {
				"type": "integer",
				"range": [128, 2048],
				"required": false,
				"description": "FE-003: Maximum input tokens before truncation"
			},
			"truncation_strategy": {
				"type": "string",
				"allowed_values": ["smart", "head", "tail"],
				"required": false,
				"description": "FE-003: smart=preserve sentence boundaries, head=truncate end, tail=truncate start"
			}
		}
	},

	"model_bart": {
		"description": "BART Zero-Shot Crisis Classifier - PRIMARY MODEL (Weight: 0.50)",
		"model_id": "${NLP_MODEL_BART_ID}",
		"weight": "${NLP_MODEL_BART_WEIGHT}",
		"enabled": "${NLP_MODEL_BART_ENABLED}",
		"task": "zero-shot-classification",
		"role": "primary",
		"defaults": {
			"model_id": "facebook/bart-large-mnli",
			"weight": 0.5,
			"enabled": true,
			"task": "zero-shot-classification",
			"role": "primary"
		},
		"validation": {
			"model_id": {
				"type": "string",
				"required": true
			},
			"weight": {
				"type": "float",
				"range": [0.0, 1.0],
				"required": true
			},
			"enabled": {
				"type": "boolean",
				"required": true
			},
			"task": {
				"type": "string",
				"allowed_values": ["zero-shot-classification", "text-classification"],
				"required": true
			},
			"role": {
				"type": "string",
				"allowed_values": ["primary", "secondary", "tertiary", "supplementary"],
				"required": true
			}
		}
	},

	"model_sentiment": {
		"description": "Cardiff Sentiment Analyzer - SECONDARY MODEL (Weight: 0.25)",
		"model_id": "${NLP_MODEL_SENTIMENT_ID}",
		"weight": "${NLP_MODEL_SENTIMENT_WEIGHT}",
		"enabled": "${NLP_MODEL_SENTIMENT_ENABLED}",
		"task": "text-classification",
		"role": "secondary",
		"defaults": {
			"model_id": "cardiffnlp/twitter-roberta-base-sentiment-latest",
			"weight": 0.25,
			"enabled": true,
			"task": "text-classification",
			"role": "secondary"
		},
		"validation": {
			"model_id": {
				"type": "string",
				"required": true
			},
			"weight": {
				"type": "float",
				"range": [0.0, 1.0],
				"required": true
			},
			"enabled": {
				"type": "boolean",
				"required": true
			},
			"task": {
				"type": "string",
				"allowed_values": ["zero-shot-classification", "text-classification"],
				"required": true
			},
			"role": {
				"type": "string",
				"allowed_values": ["primary", "secondary", "tertiary", "supplementary"],
				"required": true
			}
		}
	},

	"model_irony": {
		"description": "Cardiff Irony Detector - TERTIARY MODEL (Weight: 0.15)",
		"model_id": "${NLP_MODEL_IRONY_ID}",
		"weight": "${NLP_MODEL_IRONY_WEIGHT}",
		"enabled": "${NLP_MODEL_IRONY_ENABLED}",
		"task": "text-classification",
		"role": "tertiary",
		"defaults": {
			"model_id": "cardiffnlp/twitter-roberta-base-irony",
			"weight": 0.15,
			"enabled": true,
			"task": "text-classification",
			"role": "tertiary"
		},
		"validation": {
			"model_id": {
				"type": "string",
				"required": true
			},
			"weight": {
				"type": "float",
				"range": [0.0, 1.0],
				"required": true
			},
			"enabled": {
				"type": "boolean",
				"required": true
			},
			"task": {
				"type": "string",
				"allowed_values": ["zero-shot-classification", "text-classification"],
				"required": true
			},
			"role": {
				"type": "string",
				"allowed_values": ["primary", "secondary", "tertiary", "supplementary"],
				"required": true
			}
		}
	},

	"model_emotions": {
		"description": "RoBERTa Emotions Classifier - SUPPLEMENTARY MODEL (Weight: 0.10)",
		"model_id": "${NLP_MODEL_EMOTIONS_ID}",
		"weight": "${NLP_MODEL_EMOTIONS_WEIGHT}",
		"enabled": "${NLP_MODEL_EMOTIONS_ENABLED}",
		"task": "text-classification",
		"role": "supplementary",
		"defaults": {
			"model_id": "SamLowe/roberta-base-go_emotions",
			"weight": 0.1,
			"enabled": true,
			"task": "text-classification",
			"role": "supplementary"
		},
		"validation": {
			"model_id": {
				"type": "string",
				"required": true
			},
			"weight": {
				"type": "float",
				"range": [0.0, 1.0],
				"required": true
			},
			"enabled": {
				"type": "boolean",
				"required": true
			},
			"task": {
				"type": "string",
				"allowed_values": ["zero-shot-classification", "text-classification"],
				"required": true
			},
			"role": {
				"type": "string",
				"allowed_values": ["primary", "secondary", "tertiary", "supplementary"],
				"required": true
			}
		}
	},

	"thresholds": {
		"description": "Crisis severity threshold mappings for ensemble scoring",
		"critical": "${NLP_THRESHOLD_CRITICAL}",
		"high": "${NLP_THRESHOLD_HIGH}",
		"medium": "${NLP_THRESHOLD_MEDIUM}",
		"low": "${NLP_THRESHOLD_LOW}",
		"defaults": {
			"critical": 0.85,
			"high": 0.7,
			"medium": 0.5,
			"low": 0.3
		},
		"validation": {
			"critical": {
				"type": "float",
				"range": [0.7, 0.99],
				"required": true
			},
			"high": {
				"type": "float",
				"range": [0.5, 0.9],
				"required": true
			},
			"medium": {
				"type": "float",
				"range": [0.3, 0.7],
				"required": true
			},
			"low": {
				"type": "float",
				"range": [0.1, 0.5],
				"required": true
			}
		}
	},

	"logging": {
		"description": "Logging configuration for structured output",
		"level": "${NLP_LOG_LEVEL}",
		"format": "${NLP_LOG_FORMAT}",
		"file": "${NLP_LOG_FILE}",
		"console": "${NLP_LOG_CONSOLE}",
		"defaults": {
			"level": "INFO",
			"format": "json",
			"file": "/app/logs/ash-nlp.log",
			"console": true
		},
		"validation": {
			"level": {
				"type": "string",
				"allowed_values": ["DEBUG", "INFO", "WARNING", "ERROR", "CRITICAL"],
				"required": true
			},
			"format": {
				"type": "string",
				"allowed_values": ["json", "text"],
				"required": true
			},
			"file": {
				"type": "string",
				"required": true
			},
			"console": {
				"type": "boolean",
				"required": false
			}
		}
	},

	"performance": {
		"description": "Performance optimization settings",
		"cache_enabled": "${NLP_CACHE_ENABLED}",
		"cache_ttl": "${NLP_CACHE_TTL}",
		"cache_max_size_mb": "${NLP_CACHE_MAX_SIZE_MB}",
		"async_inference": "${NLP_ASYNC_INFERENCE}",
		"defaults": {
			"cache_enabled": true,
			"cache_ttl": 300,
			"cache_max_size_mb": 100,
			"async_inference": true
		},
		"validation": {
			"cache_enabled": {
				"type": "boolean",
				"required": false
			},
			"cache_ttl": {
				"type": "integer",
				"range": [60, 3600],
				"required": false
			},
			"cache_max_size_mb": {
				"type": "integer",
				"range": [10, 1000],
				"required": false
			},
			"async_inference": {
				"type": "boolean",
				"required": false
			}
		}
	},

	"crisis_labels": {
		"description": "Crisis classification labels for BART zero-shot classifier",
		"primary_labels": [
			"suicide ideation",
			"self-harm",
			"domestic violence",
			"panic attack",
			"severe depression",
			"substance abuse crisis"
		],
		"secondary_labels": [
			"emotional distress",
			"anxiety",
			"grief",
			"relationship crisis",
			"identity crisis",
			"isolation"
		],
		"safe_labels": [
			"casual conversation",
			"positive sharing",
			"seeking information",
			"general discussion"
		],
		"defaults": {
			"primary_labels": [
				"suicide ideation",
				"self-harm",
				"domestic violence",
				"panic attack",
				"severe depression",
				"substance abuse crisis"
			],
			"secondary_labels": [
				"emotional distress",
				"anxiety",
				"grief",
				"relationship crisis",
				"identity crisis",
				"isolation"
			],
			"safe_labels": [
				"casual conversation",
				"positive sharing",
				"seeking information",
				"general discussion"
			]
		},
		"validation": {
			"primary_labels": {
				"type": "list",
				"required": true
			},
			"secondary_labels": {
				"type": "list",
				"required": true
			},
			"safe_labels": {
				"type": "list",
				"required": true
			}
		}
	},

	"vigil": {
		"description": "Ash-Vigil integration configuration - specialized mental health risk detection on Bacchus",
		"enabled": "${NLP_VIGIL_ENABLED}",
		"host": "${NLP_VIGIL_HOST}",
		"port": "${NLP_VIGIL_PORT}",
		"timeout_ms": "${NLP_VIGIL_TIMEOUT}",
		"retry_attempts": "${NLP_VIGIL_RETRIES}",
		"circuit_breaker": {
			"failure_threshold": "${NLP_VIGIL_CB_FAILURE_THRESHOLD}",
			"recovery_timeout_seconds": "${NLP_VIGIL_CB_RECOVERY_SECONDS}"
		},
		"defaults": {
			"enabled": true,
			"host": "10.20.30.14",
			"port": 30882,
			"timeout_ms": 500,
			"retry_attempts": 1,
			"circuit_breaker": {
				"failure_threshold": 3,
				"recovery_timeout_seconds": 30
			}
		},
		"validation": {
			"enabled": {
				"type": "boolean",
				"required": false
			},
			"host": {
				"type": "string",
				"required": true
			},
			"port": {
				"type": "integer",
				"range": [1, 65535],
				"required": true
			},
			"timeout_ms": {
				"type": "integer",
				"range": [100, 5000],
				"required": false
			},
			"retry_attempts": {
				"type": "integer",
				"range": [0, 5],
				"required": false
			}
		}
	},

	"vigil_amplification": {
		"description": "Vigil risk amplification configuration - controls when and how Vigil boosts base scores",
		"enabled": "${NLP_VIGIL_AMPLIFICATION_ENABLED}",
		"score_cap": "${NLP_VIGIL_SCORE_CAP}",
		"skip_threshold": "${NLP_VIGIL_SKIP_THRESHOLD}",
		"amplify_medium": "${NLP_VIGIL_AMPLIFY_MEDIUM}",
		"vigil_thresholds": {
			"description": "Vigil risk score thresholds that trigger different amplification levels",
			"critical": "${NLP_VIGIL_THRESHOLD_CRITICAL}",
			"high": "${NLP_VIGIL_THRESHOLD_HIGH}",
			"moderate": "${NLP_VIGIL_THRESHOLD_MODERATE}"
		},
		"boosts": {
			"description": "Score adjustments applied based on Vigil risk detection",
			"critical_boost": "${NLP_VIGIL_BOOST_CRITICAL}",
			"critical_minimum": "${NLP_VIGIL_BOOST_CRITICAL_MIN}",
			"high_multiplier": "${NLP_VIGIL_BOOST_HIGH_MULT}",
			"moderate_multiplier": "${NLP_VIGIL_BOOST_MOD_MULT}"
		},
		"defaults": {
			"enabled": true,
			"score_cap": 1.0,
			"skip_threshold": 0.7,
			"amplify_medium": true,
			"vigil_thresholds": {
				"critical": 0.8,
				"high": 0.6,
				"moderate": 0.4
			},
			"boosts": {
				"critical_boost": 0.35,
				"critical_minimum": 0.55,
				"high_multiplier": 0.3,
				"moderate_multiplier": 0.1
			}
		},
		"validation": {
			"enabled": {
				"type": "boolean",
				"required": false
			},
			"score_cap": {
				"type": "float",
				"range": [0.9, 1.0],
				"required": false
			},
			"skip_threshold": {
				"type": "float",
				"range": [0.5, 0.9],
				"required": false
			},
			"amplify_medium": {
				"type": "boolean",
				"required": false
			},
			"vigil_thresholds": {
				"critical": {
					"type": "float",
					"range": [0.6, 1.0],
					"required": false
				},
				"high": {
					"type": "float",
					"range": [0.4, 0.9],
					"required": false
				},
				"moderate": {
					"type": "float",
					"range": [0.2, 0.7],
					"required": false
				}
			},
			"boosts": {
				"critical_boost": {
					"type": "float",
					"range": [0.1, 0.5],
					"required": false
				},
				"critical_minimum": {
					"type": "float",
					"range": [0.4, 0.7],
					"required": false
				},
				"high_multiplier": {
					"type": "float",
					"range": [0.1, 0.5],
					"required": false
				},
				"moderate_multiplier": {
					"type": "float",
					"range": [0.05, 0.3],
					"required": false
				}
			}
		}
	}
}
