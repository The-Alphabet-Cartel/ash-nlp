{
  "_metadata": {
    "file_version": "v3.1-3d-6-1",
    "last_modified": "2025-08-22",
    "clean_architecture": "v3.1 Compliant",
    "configuration_version": "3d.10.11-3",
    "description": "AI model ensemble configuration for NLP crisis detection system",
    "compliance": "Clean Architecture v3.1 Standards",
    "managers": ["ModelCoordinationManager"]
  },

  "ensemble_models": {
    "model_definitions": {
      "depression": {
        "name": "${NLP_MODEL_DEPRESSION_NAME}",
        "weight": "${NLP_MODEL_DEPRESSION_WEIGHT}",
        "type": "${NLP_MODEL_DEPRESSION_TYPE}",
        "pipeline_task": "${NLP_MODEL_DEPRESSION_PIPELINE_TASK}",
        "cache_dir": "${NLP_STORAGE_MODELS_DIR}",
        "enabled": "${NLP_MODEL_DEPRESSION_ENABLED}"
      },
      "sentiment": {
        "name": "${NLP_MODEL_SENTIMENT_NAME}",
        "weight": "${NLP_MODEL_SENTIMENT_WEIGHT}",
        "type": "${NLP_MODEL_SENTIMENT_TYPE}",
        "pipeline_task": "${NLP_MODEL_SENTIMENT_PIPELINE_TASK}",
        "cache_dir": "${NLP_STORAGE_MODELS_DIR}",
        "enabled": "${NLP_MODEL_SENTIMENT_ENABLED}"
      },
      "emotional_distress": {
        "name": "${NLP_MODEL_DISTRESS_NAME}",
        "weight": "${NLP_MODEL_DISTRESS_WEIGHT}",
        "type": "${NLP_MODEL_DISTRESS_TYPE}",
        "pipeline_task": "${NLP_MODEL_DISTRESS_PIPELINE_TASK}",
        "cache_dir": "${NLP_STORAGE_MODELS_DIR}",
        "enabled": "${NLP_MODEL_DISTRESS_ENABLED}"
      }
    },
    "defaults": {
      "depression": {
        "name": "MoritzLaurer/deberta-v3-base-zeroshot-v2.0",
        "weight": 0.4,
        "type": "zero-shot-classification",
        "pipeline_task": "zero-shot-classification",
        "cache_dir": "./models/cache",
        "enabled": true
      },
      "sentiment": {
        "name": "Lowerated/lm6-deberta-v3-topic-sentiment",
        "weight": 0.3,
        "type": "zero-shot-classification",
        "pipeline_task": "zero-shot-classification",
        "cache_dir": "./models/cache",
        "enabled": true
      },
      "emotional_distress": {
        "name": "MoritzLaurer/mDeBERTa-v3-base-mnli-xnli",
        "weight": 0.3,
        "type": "zero-shot-classification",
        "pipeline_task": "zero-shot-classification",
        "cache_dir": "./models/cache",
        "enabled": true
      }
    },
    "validation": {
      "depression": {
        "name": {
          "type": "string",
          "required": true,
          "min_length": 5,
          "description": "HuggingFace model name"
        },
        "weight": {
          "type": "float",
          "range": [0.001, 1.000],
          "description": "Model weight in ensemble (should sum to 1.0 across all models)"
        },
        "type": {
          "type": "string",
          "allowed_values": ["zero-shot-classification", "text-classification", "sequence-classification"],
          "description": "Model type classification"
        },
        "pipeline_task": {
          "type": "string",
          "allowed_values": ["zero-shot-classification", "text-classification", "sentiment-analysis"],
          "description": "HuggingFace pipeline task"
        },
        "cache_dir": {
          "type": "string",
          "description": "Model cache directory path"
        },
        "enabled": {
          "type": "boolean",
          "description": "Whether model is enabled for ensemble"
        }
      },
      "sentiment": {
        "name": {
          "type": "string",
          "required": true,
          "min_length": 5,
          "description": "HuggingFace model name"
        },
        "weight": {
          "type": "float",
          "range": [0.001, 1.000],
          "description": "Model weight in ensemble (should sum to 1.0 across all models)"
        },
        "type": {
          "type": "string",
          "allowed_values": ["zero-shot-classification", "text-classification", "sequence-classification"],
          "description": "Model type classification"
        },
        "pipeline_task": {
          "type": "string",
          "allowed_values": ["zero-shot-classification", "text-classification", "sentiment-analysis"],
          "description": "HuggingFace pipeline task"
        },
        "cache_dir": {
          "type": "string",
          "description": "Model cache directory path"
        },
        "enabled": {
          "type": "boolean",
          "description": "Whether model is enabled for ensemble"
        }
      },
      "emotional_distress": {
        "name": {
          "type": "string",
          "required": true,
          "min_length": 5,
          "description": "HuggingFace model name"
        },
        "weight": {
          "type": "float",
          "range": [0.001, 1.000],
          "description": "Model weight in ensemble (should sum to 1.0 across all models)"
        },
        "type": {
          "type": "string",
          "allowed_values": ["zero-shot-classification", "text-classification", "sequence-classification"],
          "description": "Model type classification"
        },
        "pipeline_task": {
          "type": "string",
          "allowed_values": ["zero-shot-classification", "text-classification", "sentiment-analysis"],
          "description": "HuggingFace pipeline task"
        },
        "cache_dir": {
          "type": "string",
          "description": "Model cache directory path"
        },
        "enabled": {
          "type": "boolean",
          "description": "Whether model is enabled for ensemble"
        }
      }
    }
  },

  "ensemble_config": {
    "mode": "${NLP_ENSEMBLE_MODE}",
    "require_all_models": "${NLP_MODEL_COORDINATION_REQUIRE_ALL_MODELS}",
    "fallback_mode": "${NLP_MODEL_COORDINATION_FALLBACK_MODE}",
    "confidence_threshold": "${NLP_MODEL_COORDINATION_CONFIDENCE_THRESHOLD}",
    "cache_dir": "${NLP_STORAGE_MODELS_DIR}",
    "defaults": {
      "mode": "majority",
      "require_all_models": true,
      "fallback_mode": "consensus",
      "confidence_threshold": 0.7,
      "cache_dir": "./models/cache"
    },
    "validation": {
      "mode": {
        "type": "string",
        "allowed_values": ["consensus", "majority", "weighted"],
        "description": "Ensemble decision mode"
      },
      "require_all_models": {
        "type": "boolean",
        "description": "Whether all models must be loaded for analysis"
      },
      "fallback_mode": {
        "type": "string",
        "allowed_values": ["consensus", "majority", "weighted"],
        "description": "Fallback mode if primary mode fails"
      },
      "confidence_threshold": {
        "type": "float",
        "range": [0.001, 1.000],
        "description": "Minimum confidence for ensemble decisions"
      },
      "cache_dir": {
        "type": "string",
        "description": "Model cache directory path"
      }
    }
  },

  "hardware_settings": {
    "device": "${NLP_HARDWARE_DEVICE}",
    "device_map": "${NLP_HARDWARE_DEVICE_MAP}",
    "load_in_8bit": "${NLP_HARDWARE_LOAD_IN_8BIT}",
    "load_in_4bit": "${NLP_HARDWARE_LOAD_IN_4BIT}",
    "model_precision": "${NLP_HARDWARE_PRECISION}",
    "cache_dir": "${NLP_STORAGE_MODELS_DIR}",
    "defaults": {
      "device": "auto",
      "device_map": "auto",
      "load_in_8bit": false,
      "load_in_4bit": false,
      "model_precision": "float16",
      "cache_dir": "./models/cache"
    },
    "validation": {
      "device": {
        "type": "string",
        "allowed_values": ["auto", "cpu", "cuda", "mps"],
        "description": "Hardware device for model inference"
      },
      "device_map": {
        "type": "string",
        "description": "Device mapping strategy"
      },
      "load_in_8bit": {
        "type": "boolean",
        "description": "Load models in 8-bit precision"
      },
      "load_in_4bit": {
        "type": "boolean",
        "description": "Load models in 4-bit precision"
      },
      "model_precision": {
        "type": "string",
        "allowed_values": ["float16", "float32", "bfloat16"],
        "description": "Torch data type for model weights"
      },
      "cache_dir": {
        "type": "string",
        "description": "Model cache directory path"
      }
    }
  }
}