{
  "_metadata": {
    "configuration_version": "3d.1",
    "description": "AI model ensemble configuration for NLP crisis detection system",
    "created_date": "2025-08-12",
    "updated_date": "2025-08-12",
    "compliance": "Clean Architecture v3.1 Standards",
    "managers": ["ModelEnsembleManager", "ModelsManager"],
    "environment_overrides": {
      "description": "All model settings support environment variable overrides",
      "pattern": "${NLP_MODEL_*CATEGORY*_*SETTING*}",
      "examples": [
        "NLP_MODEL_SENTIMENT_NAME",
        "NLP_MODEL_ENSEMBLE_MODE",
        "NLP_MODEL_HARDWARE_DEVICE"
      ]
    }
  },

  "model_ensemble": {
    "model_definitions": {
      "depression": {
        "name": "${NLP_MODEL_DEPRESSION_NAME}",
        "weight": "${NLP_MODEL_DEPRESSION_WEIGHT}",
        "type": "${NLP_MODEL_DEPRESSION_TYPE}",
        "pipeline_task": "${NLP_MODEL_DEPRESSION_PIPELINE_TASK}",
        "cache_dir": "${NLP_MODEL_DEPRESSION_CACHE_DIR}",
        "enabled": "${NLP_MODEL_DEPRESSION_ENABLED}"
      },
      "sentiment": {
        "name": "${NLP_MODEL_SENTIMENT_NAME}",
        "weight": "${NLP_MODEL_SENTIMENT_WEIGHT}",
        "type": "${NLP_MODEL_SENTIMENT_TYPE}",
        "pipeline_task": "${NLP_MODEL_SENTIMENT_PIPELINE_TASK}",
        "cache_dir": "${NLP_MODEL_SENTIMENT_CACHE_DIR}",
        "enabled": "${NLP_MODEL_SENTIMENT_ENABLED}"
      },
      "emotional_distress": {
        "name": "${NLP_MODEL_DISTRESS_NAME}",
        "weight": "${NLP_MODEL_DISTRESS_WEIGHT}",
        "type": "${NLP_MODEL_DISTRESS_TYPE}",
        "pipeline_task": "${NLP_MODEL_DISTRESS_PIPELINE_TASK}",
        "cache_dir": "${NLP_MODEL_DISTRESS_CACHE_DIR}",
        "enabled": "${NLP_MODEL_DISTRESS_ENABLED}"
      }
    },
    "ensemble_config": {
      "mode": "${NLP_MODEL_ENSEMBLE_MODE}",
      "require_all_models": "${NLP_MODEL_ENSEMBLE_REQUIRE_ALL_MODELS}",
      "fallback_mode": "${NLP_MODEL_ENSEMBLE_FALLBACK_MODE}",
      "confidence_threshold": "${NLP_MODEL_ENSEMBLE_CONFIDENCE_THRESHOLD}"
    }
  },

  "hardware_settings": {
    "device": "${NLP_MODEL_HARDWARE_DEVICE}",
    "device_map": "${NLP_MODEL_HARDWARE_DEVICE_MAP}",
    "load_in_8bit": "${NLP_MODEL_HARDWARE_LOAD_IN_8BIT}",
    "load_in_4bit": "${NLP_MODEL_HARDWARE_LOAD_IN_4BIT}",
    "torch_dtype": "${NLP_MODEL_HARDWARE_TORCH_DTYPE}",
    "max_memory": "${NLP_MODEL_HARDWARE_MAX_MEMORY}",
    "offload_folder": "${NLP_MODEL_HARDWARE_OFFLOAD_FOLDER}"
  },

  "validation": {
    "description": "Model ensemble validation rules and constraints",
    "ensure_weights_sum_to_one": true,
    "fail_on_invalid_weights": false,
    "require_minimum_models": 2,
    "allow_partial_ensemble": false,
    "validate_model_compatibility": true
  },

  "defaults": {
    "model_ensemble": {
      "model_definitions": {
        "depression": {
          "name": "MoritzLaurer/deberta-v3-base-zeroshot-v2.0",
          "weight": 0.75,
          "type": "zero-shot-classification",
          "pipeline_task": "zero-shot-classification",
          "cache_dir": "./models/cache",
          "enabled": true
        },
        "sentiment": {
          "name": "Lowerated/lm6-deberta-v3-topic-sentiment",
          "weight": 0.10,
          "type": "zero-shot-classification",
          "pipeline_task": "zero-shot-classification",
          "cache_dir": "./models/cache",
          "enabled": true
        },
        "emotional_distress": {
          "name": "MoritzLaurer/mDeBERTa-v3-base-mnli-xnli",
          "weight": 0.15,
          "type": "zero-shot-classification", 
          "pipeline_task": "zero-shot-classification",
          "cache_dir": "./models/cache",
          "enabled": true
        }
      },
      "ensemble_config": {
        "mode": "majority",
        "require_all_models": true,
        "fallback_mode": "consensus",
        "confidence_threshold": 0.5
      }
    },
    "hardware_settings": {
      "device": "auto",
      "device_map": "auto",
      "load_in_8bit": false,
      "load_in_4bit": false,
      "torch_dtype": "float16",
      "max_memory": null,
      "offload_folder": null
    }
  }
}