{
  "_metadata": {
    "file_version": "v3.1-3d-10.10-1",
    "last_modified": "2025-08-14",
    "clean_architecture": "v3.1 Compliant",
    "configuration_version": "3d.1",
    "description": "AI model ensemble configuration for NLP crisis detection system",
    "created_date": "2025-08-12",
    "updated_date": "2025-08-14",
    "compliance": "Clean Architecture v3.1 Standards",
    "managers": ["ModelEnsembleManager", "ModelsManager"],
    "migration_status": "Step 10.10 - Environmental Variables Cleanup: Eliminated duplicate hardware variables, consolidated cache settings",
    "environment_overrides": {
      "description": "All model settings support environment variable overrides",
      "pattern": "${NLP_MODEL_*CATEGORY*_*SETTING*}",
      "examples": [
        "NLP_MODEL_SENTIMENT_NAME",
        "NLP_ENSEMBLE_MODE",
        "NLP_HARDWARE_DEVICE"
      ]
    }
  },

  "model_ensemble": {
    "model_definitions": {
      "depression": {
        "name": "${NLP_MODEL_DEPRESSION_NAME}",
        "weight": "${NLP_MODEL_DEPRESSION_WEIGHT}",
        "type": "${NLP_MODEL_DEPRESSION_TYPE}",
        "pipeline_task": "${NLP_MODEL_DEPRESSION_PIPELINE_TASK}"
      },
      "sentiment": {
        "name": "${NLP_MODEL_SENTIMENT_NAME}",
        "weight": "${NLP_MODEL_SENTIMENT_WEIGHT}",
        "type": "${NLP_MODEL_SENTIMENT_TYPE}",
        "pipeline_task": "${NLP_MODEL_SENTIMENT_PIPELINE_TASK}"
      },
      "emotional_distress": {
        "name": "${NLP_MODEL_DISTRESS_NAME}",
        "weight": "${NLP_MODEL_DISTRESS_WEIGHT}",
        "type": "${NLP_MODEL_DISTRESS_TYPE}",
        "pipeline_task": "${NLP_MODEL_DISTRESS_PIPELINE_TASK}"
      }
    },
    "ensemble_config": {
      "mode": "${NLP_ENSEMBLE_MODE}",
      "defaults": {
        "mode": "consensus",
        "require_all_models": false,
        "fallback_mode": "majority",
        "confidence_threshold": 0.5
      },
      "validation": {
        "mode": {
          "choices": ["consensus", "majority", "weighted"],
          "type": "string"
        },
        "require_all_models": {
          "type": "boolean"
        },
        "fallback_mode": {
          "choices": ["consensus", "majority", "weighted"],
          "type": "string"
        },
        "confidence_threshold": {
          "range": [0.0, 1.0],
          "type": "float"
        }
      }
    }
  },

  "model_defaults": {
    "description": "Default settings applied to all models",
    "cache_dir": "${NLP_STORAGE_MODELS_DIR}",
    "enabled": true,
    "defaults": {
      "cache_dir": "./models/cache",
      "enabled": true,
      "type": "zero-shot-classification",
      "pipeline_task": "zero-shot-classification"
    },
    "validation": {
      "cache_dir": {
        "type": "string"
      },
      "enabled": {
        "type": "boolean"
      },
      "type": {
        "type": "string"
      },
      "pipeline_task": {
        "type": "string"
      }
    }
  },

  "hardware_settings": {
    "device": "${NLP_HARDWARE_DEVICE}",
    "precision": "${NLP_HARDWARE_PRECISION}",
    "max_batch_size": "${NLP_HARDWARE_MAX_BATCH_SIZE}",
    "inference_threads": "${NLP_HARDWARE_INFERENCE_THREADS}",
    "defaults": {
      "device": "auto",
      "precision": "float16",
      "max_batch_size": 32,
      "inference_threads": 16,
      "device_map": "auto",
      "load_in_8bit": false,
      "load_in_4bit": false,
      "torch_dtype": "float16",
      "max_memory": null,
      "offload_folder": null
    },
    "validation": {
      "device": {
        "choices": ["auto", "cpu", "cuda", "mps"],
        "type": "string"
      },
      "precision": {
        "choices": ["float16", "float32", "bfloat16"],
        "type": "string"
      },
      "max_batch_size": {
        "range": [1, 128],
        "type": "integer"
      },
      "inference_threads": {
        "range": [1, 64],
        "type": "integer"
      }
    }
  },

  "validation": {
    "description": "Model ensemble validation rules and constraints",
    "ensure_weights_sum_to_one": true,
    "fail_on_invalid_weights": false,
    "require_minimum_models": 2,
    "allow_partial_ensemble": false,
    "validation_tolerance": 0.1,
    "weight_normalization": true,
    "defaults": {
      "ensure_weights_sum_to_one": true,
      "fail_on_invalid_weights": false,
      "require_minimum_models": 2,
      "allow_partial_ensemble": false,
      "validation_tolerance": 0.1,
      "weight_normalization": true
    }
  },

  "performance": {
    "description": "Performance optimization settings for model ensemble",
    "parallel_loading": true,
    "cache_models": true,
    "preload_models": false,
    "memory_optimization": true,
    "defaults": {
      "parallel_loading": true,
      "cache_models": true,
      "preload_models": false,
      "memory_optimization": true
    },
    "validation": {
      "parallel_loading": {
        "type": "boolean"
      },
      "cache_models": {
        "type": "boolean"
      },
      "preload_models": {
        "type": "boolean"
      },
      "memory_optimization": {
        "type": "boolean"
      }
    }
  }
}