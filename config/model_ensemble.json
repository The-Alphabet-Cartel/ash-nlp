{
  "_metadata": {
    "configuration_version": "3d.1",
    "description": "AI model ensemble configuration for NLP crisis detection system",
    "created_date": "2025-08-12",
    "updated_date": "2025-08-12",
    "compliance": "Clean Architecture v3.1 Standards",
    "managers": ["ModelEnsembleManager", "ModelsManager"],
    "environment_overrides": {
      "description": "All model settings support environment variable overrides",
      "pattern": "${NLP_MODEL_*CATEGORY*_*SETTING*}",
      "examples": [
        "NLP_MODEL_SENTIMENT_MODEL_NAME",
        "NLP_MODEL_ENSEMBLE_MODE",
        "NLP_MODEL_HARDWARE_DEVICE"
      ]
    }
  },

  "model_ensemble": {
    "model_definitions": {
      "sentiment": {
        "name": "${NLP_MODEL_SENTIMENT_MODEL_NAME}",
        "weight": "${NLP_MODEL_SENTIMENT_MODEL_WEIGHT}",
        "type": "${NLP_MODEL_SENTIMENT_MODEL_TYPE}",
        "pipeline_task": "${NLP_MODEL_SENTIMENT_PIPELINE_TASK}",
        "cache_dir": "${NLP_MODEL_SENTIMENT_CACHE_DIR}",
        "enabled": "${NLP_MODEL_SENTIMENT_ENABLED}"
      },
      "emotional_distress": {
        "name": "${NLP_MODEL_EMOTION_MODEL_NAME}",
        "weight": "${NLP_MODEL_EMOTION_MODEL_WEIGHT}",
        "type": "${NLP_MODEL_EMOTION_MODEL_TYPE}",
        "pipeline_task": "${NLP_MODEL_EMOTION_PIPELINE_TASK}",
        "cache_dir": "${NLP_MODEL_EMOTION_CACHE_DIR}",
        "enabled": "${NLP_MODEL_EMOTION_ENABLED}"
      },
      "depression": {
        "name": "${NLP_MODEL_MENTAL_HEALTH_MODEL_NAME}",
        "weight": "${NLP_MODEL_MENTAL_HEALTH_MODEL_WEIGHT}",
        "type": "${NLP_MODEL_MENTAL_HEALTH_MODEL_TYPE}",
        "pipeline_task": "${NLP_MODEL_MENTAL_HEALTH_PIPELINE_TASK}",
        "cache_dir": "${NLP_MODEL_MENTAL_HEALTH_CACHE_DIR}",
        "enabled": "${NLP_MODEL_MENTAL_HEALTH_ENABLED}"
      }
    },
    "ensemble_config": {
      "mode": "${NLP_MODEL_ENSEMBLE_MODE}",
      "require_all_models": "${NLP_MODEL_ENSEMBLE_REQUIRE_ALL_MODELS}",
      "fallback_mode": "${NLP_MODEL_ENSEMBLE_FALLBACK_MODE}",
      "confidence_threshold": "${NLP_MODEL_ENSEMBLE_CONFIDENCE_THRESHOLD}"
    }
  },

  "hardware_settings": {
    "device": "${NLP_MODEL_HARDWARE_DEVICE}",
    "device_map": "${NLP_MODEL_HARDWARE_DEVICE_MAP}",
    "load_in_8bit": "${NLP_MODEL_HARDWARE_LOAD_IN_8BIT}",
    "load_in_4bit": "${NLP_MODEL_HARDWARE_LOAD_IN_4BIT}",
    "torch_dtype": "${NLP_MODEL_HARDWARE_TORCH_DTYPE}",
    "max_memory": "${NLP_MODEL_HARDWARE_MAX_MEMORY}",
    "offload_folder": "${NLP_MODEL_HARDWARE_OFFLOAD_FOLDER}"
  },

  "validation": {
    "description": "Model ensemble validation rules and constraints",
    "ensure_weights_sum_to_one": true,
    "fail_on_invalid_weights": false,
    "require_minimum_models": 2,
    "allow_partial_ensemble": true,
    "validate_model_compatibility": true
  },

  "defaults": {
    "model_ensemble": {
      "model_definitions": {
        "sentiment": {
          "name": "cardiffnlp/twitter-roberta-base-sentiment-latest",
          "weight": 0.4,
          "type": "transformers",
          "pipeline_task": "text-classification",
          "cache_dir": "./models/cache",
          "enabled": true
        },
        "emotional_distress": {
          "name": "j-hartmann/emotion-english-distilroberta-base",
          "weight": 0.35,
          "type": "transformers", 
          "pipeline_task": "text-classification",
          "cache_dir": "./models/cache",
          "enabled": true
        },
        "depression": {
          "name": "martin-ha/toxic-comment-model",
          "weight": 0.25,
          "type": "transformers",
          "pipeline_task": "text-classification",
          "cache_dir": "./models/cache",
          "enabled": true
        }
      },
      "ensemble_config": {
        "mode": "weighted",
        "require_all_models": false,
        "fallback_mode": "single_best",
        "confidence_threshold": 0.5
      }
    },
    "hardware_settings": {
      "device": "auto",
      "device_map": "auto",
      "load_in_8bit": false,
      "load_in_4bit": false,
      "torch_dtype": "float16",
      "max_memory": null,
      "offload_folder": null
    }
  }
}